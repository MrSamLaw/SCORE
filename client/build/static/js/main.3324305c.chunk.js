(this["webpackJsonpscore-client"]=this["webpackJsonpscore-client"]||[]).push([[0],{81:function(e,n,t){},82:function(e,n,t){},83:function(e,n,t){},94:function(e,n,t){},95:function(e,n,t){},96:function(e,n,t){},97:function(e,n,t){},98:function(e,n,t){"use strict";t.r(n);var a=t(3),c=t.n(a),r=t(63),s=t.n(r),i=(t(81),t(23)),o=(t(82),t(71)),l=t(106),j=t(107),d=t(105),u=t(70),b=t(25),m=t(10),O=(t(83),t(64)),h=t(65),p=t(54),x=new(function(){function e(){Object(O.a)(this,e)}return Object(h.a)(e,[{key:"getProfile",value:function(){return Object(p.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return Object(p.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.reload()}}]),e}()),g=t(2);function v(){return Object(g.jsx)("section",{className:"navbar",children:Object(g.jsxs)("div",{className:"wrapper",children:[Object(g.jsx)("div",{className:"left",children:Object(g.jsx)("ul",{children:Object(g.jsx)("li",{className:"logo",children:Object(g.jsx)(b.b,{to:"/",children:Object(g.jsx)("h1",{children:"SCORE!!!"})})})})}),Object(g.jsx)("div",{className:"right",children:x.loggedIn()?Object(g.jsx)("button",{onClick:function(e){e.preventDefault(),x.logout()},children:"Logout"}):Object(g.jsxs)("ul",{children:[Object(g.jsx)("li",{children:Object(g.jsx)(b.b,{to:"/login",children:"Login"})}),Object(g.jsx)("li",{children:Object(g.jsx)(b.b,{to:"/signup",children:"Signup"})})]})})]})})}var f,N,k,w,y,S=t(38),C=t.n(S),_=t(43),$=t(37),I=t(29),q=t(111),T=t(34),B=t(108),Y=Object(B.a)(f||(f=Object(T.a)(["\n    mutation login($username:String!, $password:String!) {\n        login(username:$username, password:$password){\n            token\n            user {\n                _id\n                username\n            }\n        }\n    }\n"]))),D=Object(B.a)(N||(N=Object(T.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),E=function(e){var n=Object(a.useState)({username:"",password:""}),t=Object(I.a)(n,2),c=t[0],r=t[1],s=Object(q.a)(Y),o=Object(I.a)(s,2),l=o[0],j=o[1],d=j.error,u=j.data,m=function(e){var n=e.target,t=n.name,a=n.value;r(Object(i.a)(Object(i.a)({},c),{},Object($.a)({},t,a)))},O=function(){var e=Object(_.a)(C.a.mark((function e(n){var t,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(c),e.prev=2,e.next=5,l({variables:Object(i.a)({},c)});case 5:t=e.sent,a=t.data,x.login(a.login.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:r({username:"",password:""});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(n){return e.apply(this,arguments)}}();return Object(g.jsx)("main",{children:Object(g.jsx)("div",{children:Object(g.jsxs)("div",{children:[Object(g.jsx)("h4",{children:"Login"}),Object(g.jsxs)("div",{children:[u?Object(g.jsxs)("p",{children:["Success! You may now head"," ",Object(g.jsx)(b.b,{to:"/",children:"back to the homepage."})]}):Object(g.jsxs)("form",{onSubmit:O,children:[Object(g.jsx)("input",{className:"form-input",placeholder:"Username",name:"username",type:"username",value:c.username,onChange:m}),Object(g.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:c.password,onChange:m}),Object(g.jsx)("button",{className:"btn btn-block btn-primary",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),d&&Object(g.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:d.message})]})]})})})},Q=function(){var e=Object(a.useState)({username:"",email:"",password:""}),n=Object(I.a)(e,2),t=n[0],c=n[1],r=Object(q.a)(D),s=Object(I.a)(r,2),o=s[0],l=s[1],j=l.error,d=l.data,u=function(e){var n=e.target,a=n.name,r=n.value;c(Object(i.a)(Object(i.a)({},t),{},Object($.a)({},a,r)))},m=function(){var e=Object(_.a)(C.a.mark((function e(n){var a,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(t),e.prev=2,e.next=5,o({variables:Object(i.a)({},t)});case 5:a=e.sent,c=a.data,x.login(c.addUser.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(n){return e.apply(this,arguments)}}();return Object(g.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(g.jsx)("div",{className:"col-12 col-lg-10",children:Object(g.jsxs)("div",{className:"card",children:[Object(g.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Sign Up"}),Object(g.jsxs)("div",{className:"card-body",children:[d?Object(g.jsxs)("p",{children:["Success! You may now head"," ",Object(g.jsx)(b.b,{to:"/",children:"back to the homepage."})]}):Object(g.jsxs)("form",{onSubmit:m,children:[Object(g.jsx)("input",{className:"form-input",placeholder:"Your username",name:"username",type:"text",value:t.name,onChange:u}),Object(g.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:t.email,onChange:u}),Object(g.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:t.password,onChange:u}),Object(g.jsx)("button",{className:"btn btn-block btn-primary",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),j&&Object(g.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:j.message})]})]})})})},U=t(109),L=(t(94),function(e){var n=e.competitors;return console.log(n),n.length?Object(g.jsx)("div",{children:n&&n.map((function(e){return Object(g.jsxs)("div",{className:"card",children:[Object(g.jsx)("div",{className:"left",children:Object(g.jsx)("p",{className:"carNo",children:e.carNo})}),Object(g.jsxs)("div",{className:"right",children:[Object(g.jsx)("p",{children:e.firstName}),Object(g.jsx)("p",{children:e.lastName})]})]},e._id)}))}):Object(g.jsx)("h3",{children:"No Registered Competitors Yet"})}),R=Object(B.a)(k||(k=Object(T.a)(["\n    query getCompetitors {\n        competitors {\n            _id\n            firstName\n            lastName\n            carNo\n            class\n        }\n    }\n"])));Object(B.a)(w||(w=Object(T.a)(["\n    query getSingleRound($roundId: ID!) {\n        round(roundId: $roundId) {\n            _id\n            season\n            qualifiers {\n                _id\n            }\n        }\n    }\n"]))),Object(B.a)(y||(y=Object(T.a)(["\n    query getQualify($roundNo:roundNo) {\n        qualify(round: $round) {\n            _id\n            qualOne\n            qualTwo\n            competitor {\n                _id\n                firstName\n                lastName\n                carNo\n            }\n            round {\n                _id\n                roundNo\n                \n            }\n        }\n    }\n"]))),t(95);function J(){var e=Object(U.a)(R),n=e.loading,t=e.data,a=(null===t||void 0===t?void 0:t.competitors)||[];return Object(g.jsxs)("main",{className:"sections",children:["Home Section",Object(g.jsx)("div",{className:"container",children:n?Object(g.jsx)("div",{children:"Loading..."}):Object(g.jsx)(L,{competitors:a})})]})}t(96),t(97);var M=function(e){var n=e.qualifiers;e.qualOne,e.qualTwo,e.competitor,e.round;return console.log(n),n.length?Object(g.jsx)("div",{children:n&&n.map((function(e){return Object(g.jsx)("div",{className:"card",children:"EMPTY"},e._id)}))}):Object(g.jsx)("h3",{children:"No Competitors are entered in this round"})};function P(){var e=Object(a.useState)("Competitors"),n=Object(I.a)(e,2),t=n[0],c=n[1],r=Object(U.a)(R).data,s=(null===r||void 0===r?void 0:r.competitors)||[],i=function(e){return c(e)};return Object(g.jsxs)("main",{children:["Round Section",Object(g.jsx)("div",{className:"sectionNav",children:Object(g.jsxs)("ul",{children:[Object(g.jsx)("li",{className:"section-link active",onClick:function(){return i("Competitors")},children:"Competitors"}),Object(g.jsx)("li",{className:"section-link active",onClick:function(){return i("Qualifying")},children:"Qualifying"}),Object(g.jsx)("li",{className:"section-link active",onClick:function(){return i("Battles")},children:"Battles"})]})}),Object(g.jsx)("div",{className:"roundSections",children:"Competitors"===t?Object(g.jsx)(L,{competitors:s}):"Qualifying"===t?(console.log("Qualifying"),Object(g.jsx)(M,{})):void("Battles"===t&&console.log("Battles"))})]})}var z=Object(o.a)({uri:"/graphql"}),H=Object(u.a)((function(e,n){var t=n.headers,a=localStorage.getItem("id_token");return{headers:Object(i.a)(Object(i.a)({},t),{},{authorization:a?"Bearer ".concat(a):""})}})),A=new l.a({link:H.concat(z),cache:new j.a});var F=function(){return Object(g.jsx)(d.a,{client:A,children:Object(g.jsx)(b.a,{children:Object(g.jsxs)("div",{className:"app",children:[Object(g.jsx)(v,{}),Object(g.jsxs)("div",{className:"pages",children:[Object(g.jsx)(m.a,{exact:!0,path:"/",children:Object(g.jsx)(J,{})}),Object(g.jsx)(m.a,{exact:!0,path:"/round",children:Object(g.jsx)(P,{})}),Object(g.jsx)(m.a,{exact:!0,path:"/login",children:Object(g.jsx)(E,{})}),Object(g.jsx)(m.a,{exact:!0,path:"/signup",children:Object(g.jsx)(Q,{})})]})]})})})};s.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(F,{})}),document.getElementById("root"))}},[[98,1,2]]]);
//# sourceMappingURL=main.3324305c.chunk.js.map