(this["webpackJsonpscore-client"]=this["webpackJsonpscore-client"]||[]).push([[0],{100:function(e,n,t){},101:function(e,n,t){},102:function(e,n,t){},103:function(e,n,t){},104:function(e,n,t){},105:function(e,n,t){"use strict";t.r(n);var c=t(3),a=t.n(c),r=t(67),s=t.n(r),i=(t(86),t(28)),o=(t(87),t(75)),l=t(113),d=t(114),j=t(112),u=t(74),b=t(14),O=t(11),m=(t(88),t(68)),h=t(69),x=t(57),p=new(function(){function e(){Object(m.a)(this,e)}return Object(h.a)(e,[{key:"getProfile",value:function(){return Object(x.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return Object(x.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.reload()}}]),e}()),v=t(1);function f(){return Object(v.jsx)("section",{className:"navbar",children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)("div",{className:"left",children:Object(v.jsx)("ul",{children:Object(v.jsx)("li",{className:"logo",children:Object(v.jsx)(b.b,{to:"/",children:Object(v.jsx)("h1",{children:"SCORE!!!"})})})})}),Object(v.jsx)("div",{className:"right",children:p.loggedIn()?Object(v.jsxs)("ul",{children:[Object(v.jsx)("li",{children:Object(v.jsx)(b.b,{to:"/round",children:"Round"})}),Object(v.jsx)("li",{children:Object(v.jsx)(b.b,{to:"/competitors",children:"Competitors"})}),Object(v.jsx)("li",{onClick:function(e){e.preventDefault(),p.logout()},children:"Logout"})]}):Object(v.jsxs)("ul",{children:[Object(v.jsx)("li",{children:Object(v.jsx)(b.b,{to:"/login",children:"Login"})}),Object(v.jsx)("li",{children:Object(v.jsx)(b.b,{to:"/signup",children:"Signup"})})]})})]})})}var g,N,y,k,S,w,I=t(21),C=t.n(I),_=t(33),$=t(39),q=t(10),R=t(118),D=t(16),Q=t(115),T=Object(Q.a)(g||(g=Object(D.a)(["\n    mutation login($username:String!, $password:String!) {\n        login(username:$username, password:$password){\n            token\n            user {\n                _id\n                username\n            }\n        }\n    }\n"]))),L=Object(Q.a)(N||(N=Object(D.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),E=Object(Q.a)(y||(y=Object(D.a)(["\n  mutation addRound($roundNo: Int!, $season:ID!) {\n    addRound(roundNo: $roundNo, seasonId:$season) {\n      _id\n      roundNo\n      season {\n        _id\n      }\n    }\n  }\n"]))),Y=Object(Q.a)(k||(k=Object(D.a)(["\n  mutation addCompetitor($firstName: String!, $lastName:String!, $carNo:Int) {\n    addCompetitor(firstName: $firstName, lastName:$lastName,carNo:$carNo) {\n      _id\n      firstName\n      lastName\n      carNo\n    }\n  }\n"]))),A=Object(Q.a)(S||(S=Object(D.a)(["\n  mutation addQualifier($competitor: ID, $round:ID){\n  addQualifier(competitor: $competitor, round:$round){\n      _id\n    }\n    \n  }\n"]))),U=Object(Q.a)(w||(w=Object(D.a)(["\n  mutation AddRoundQualifiers($roundId:ID, $qualifiers: [ID]){\n    _id\n  }\n"])));t(98);function M(e){var n=e.heading;return Object(v.jsx)("div",{className:"pageTitle",children:Object(v.jsx)("h1",{children:n})})}t(56);var P=function(e){var n=Object(c.useState)({username:"",password:""}),t=Object(q.a)(n,2),a=t[0],r=t[1],s=Object(R.a)(T),o=Object(q.a)(s,2),l=o[0],d=o[1],j=d.error,u=d.data,O=function(e){var n=e.target,t=n.name,c=n.value;r(Object(i.a)(Object(i.a)({},a),{},Object($.a)({},t,c)))},m=function(){var e=Object(_.a)(C.a.mark((function e(n){var t,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(a),e.prev=2,e.next=5,l({variables:Object(i.a)({},a)});case 5:t=e.sent,c=t.data,p.login(c.login.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:r({username:"",password:""});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(n){return e.apply(this,arguments)}}();return Object(v.jsx)("main",{children:Object(v.jsxs)("div",{children:[Object(v.jsx)(M,{heading:"LOGIN"}),Object(v.jsxs)("div",{className:"formWrapper",children:[u?Object(v.jsxs)("p",{children:["Success! You may now head"," ",Object(v.jsx)(b.b,{to:"/",children:"back to the homepage."})]}):Object(v.jsxs)("form",{className:"form",onSubmit:m,children:[Object(v.jsx)("input",{className:"form-input",placeholder:"Username",name:"username",type:"username",value:a.username,onChange:O}),Object(v.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:a.password,onChange:O}),Object(v.jsx)("button",{className:"btn btn-block btn-primary",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),j&&Object(v.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:j.message})]})]})})},B=function(){var e=Object(c.useState)({username:"",email:"",password:""}),n=Object(q.a)(e,2),t=n[0],a=n[1],r=Object(R.a)(L),s=Object(q.a)(r,2),o=s[0],l=s[1],d=l.error,j=l.data,u=function(e){var n=e.target,c=n.name,r=n.value;a(Object(i.a)(Object(i.a)({},t),{},Object($.a)({},c,r)))},O=function(){var e=Object(_.a)(C.a.mark((function e(n){var c,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(t),e.prev=2,e.next=5,o({variables:Object(i.a)({},t)});case 5:c=e.sent,a=c.data,p.login(a.addUser.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(n){return e.apply(this,arguments)}}();return Object(v.jsx)("main",{children:Object(v.jsxs)("div",{children:[Object(v.jsx)(M,{heading:"SIGN-UP"}),Object(v.jsxs)("div",{className:"formWrapper",children:[j?Object(v.jsxs)("p",{children:["Success! You may now head"," ",Object(v.jsx)(b.b,{to:"/",children:"back to the homepage."})]}):Object(v.jsxs)("form",{onSubmit:O,children:[Object(v.jsx)("input",{className:"form-input",placeholder:"Your username",name:"username",type:"text",value:t.name,onChange:u}),Object(v.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:t.email,onChange:u}),Object(v.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:t.password,onChange:u}),Object(v.jsx)("button",{className:"btn btn-block btn-primary",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),d&&Object(v.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:d.message})]})]})})};t(66);function F(){return Object(v.jsx)("main",{className:"sections",children:Object(v.jsx)("div",{className:"container",children:p.loggedIn()?Object(v.jsx)("div",{children:Object(v.jsxs)("p",{children:["What would you like to do today ",p.getProfile().data.username,"?"]})}):Object(v.jsxs)("div",{children:[Object(v.jsx)("p",{children:"Welcome to SCORE!!!"}),Object(v.jsx)("p",{children:"Please login to admin your competition"}),Object(v.jsx)(b.b,{to:"/login",children:"LOGIN"})]})})})}t(100);var G,W,J,z,V,H,K,X=t(116),Z=(Object(Q.a)(G||(G=Object(D.a)(["\nquery me {\n    me{\n        _id\n        username\n    }\n}\n"]))),Object(Q.a)(W||(W=Object(D.a)(["\nquery getSeasons {\n    seasons{\n        _id\n        year\n        archived\n        rounds {\n            _id\n            roundNo\n        }\n    }\n}\n"])))),ee=Object(Q.a)(J||(J=Object(D.a)(["\n    query getCompetitors {\n        competitors {\n            _id\n            firstName\n            lastName\n            carNo\n            # class\n        }\n    }\n"]))),ne=Object(Q.a)(z||(z=Object(D.a)(["\n    query getRounds {\n        rounds {\n            _id\n            roundNo\n            season {\n                _id\n                year\n            }\n        }\n    }\n"]))),te=Object(Q.a)(V||(V=Object(D.a)(["\n    query getSingleRound($roundId: ID!) {\n        round(roundId: $roundId) {\n            _id\n            roundNo\n            # season {\n            #     _id\n            #     year\n            # }\n            qualifiers {\n                _id\n            #     competitors {\n            #         _id\n            #         firstName\n            #         lastName\n            #         carNo\n            #     }\n            }\n            battles {\n                _id\n            }\n        }\n    }\n"]))),ce=Object(Q.a)(H||(H=Object(D.a)(["\n    query getRoundQualifiers($roundId:ID!){\n        roundQualifiers(roundId:$roundId) {\n            _id\n            roundNo\n            qualifiers{\n                _id\n                competitor {\n                    _id\n                    firstName\n                    lastName\n                    carNo\n                }\n            }\n        }\n    }\n"]))),ae=(Object(Q.a)(K||(K=Object(D.a)(["\n    query getQualify($roundNo:roundNo) {\n        qualify(round: $round) {\n            _id\n            qualOne\n            qualTwo\n            competitor {\n                _id\n                firstName\n                lastName\n                carNo\n            }\n            round {\n                _id\n                roundNo\n                \n            }\n        }\n    }\n"]))),function(){var e=Object(c.useState)(""),n=Object(q.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)(""),s=Object(q.a)(r,2),i=s[0],o=s[1],l=Object(R.a)(E),d=Object(q.a)(l,1)[0],j=Object(X.a)(Z).data,u=(null===j||void 0===j?void 0:j.seasons)||[],b=function(){var e=Object(_.a)(C.a.mark((function e(n){var c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(t),console.log(i),e.prev=3,e.next=6,d({variables:{roundNo:t,season:i}});case 6:c=e.sent,c.data,a(""),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(n){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{children:Object(v.jsxs)("div",{children:[Object(v.jsx)("h3",{children:"Add a Round"}),Object(v.jsxs)("form",{onSubmit:b,children:[Object(v.jsx)("input",{name:"roundNo",placeholder:"Round Number",value:t,onChange:function(e){var n=e.target,t=n.name,c=n.value;"roundNo"===t&&a(parseInt(c))}}),Object(v.jsx)("select",{name:"seasonYear",onChange:function(e){var n=e.target,t=n.name,c=n.value;"seasonYear"===t&&o(c),console.log(c)},children:u.map((function(e){return Object(v.jsx)("option",{value:e._id,defaultValue:{value:e._id},children:e.year},e._id)}))}),Object(v.jsx)("button",{type:"submit",children:"Add Round"})]})]})})}),re=function(e){var n=e.rounds;return n.length?Object(v.jsx)("div",{children:n&&n.map((function(e){return Object(v.jsx)("div",{children:Object(v.jsxs)(b.b,{to:"/round/".concat(e._id),children:["Round ",e.roundNo]})},e._id)}))}):Object(v.jsx)("h3",{children:"No Rounds for this season yet"})};function se(){var e=Object(X.a)(ne).data,n=(null===e||void 0===e?void 0:e.rounds)||[];return Object(v.jsxs)("main",{children:["Round Section",Object(v.jsx)(re,{rounds:n}),Object(v.jsx)(ae,{}),Object(v.jsx)("hr",{})]})}t(101);function ie(e){var n=e.heading;return Object(v.jsx)("div",{className:"subTitle",children:Object(v.jsx)("h4",{children:n})})}var oe=t(76),le=(t(102),function(e){e.competing;var n=e.roundId,t=Object(X.a)(ee).data,a=Object(c.useState)([]),r=Object(q.a)(a,2),s=r[0],i=r[1],o=Object(c.useState)([]),l=Object(q.a)(o,2),d=l[0],j=l[1],u=Object(R.a)(A),b=Object(q.a)(u,1)[0],O=Object(R.a)(U),m=Object(q.a)(O,1)[0];Object(c.useEffect)((function(){i(null===t||void 0===t?void 0:t.competitors)}),[null===t||void 0===t?void 0:t.competitors]);return Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{children:s&&s.map((function(e){return Object(v.jsxs)("div",{className:"card",onClick:function(){return function(e){j([].concat(Object(oe.a)(d),[e]));var t=s.filter((function(n){return n._id!==e}));console.log("Filtered"),console.log(t),console.log("removed"),console.log(e),i(t),b({variables:{competitor:e,round:n}}),console.log(d)}(e._id)},children:[Object(v.jsx)("div",{className:"left",children:Object(v.jsx)("p",{className:"carNo",children:e.carNo})}),Object(v.jsxs)("div",{className:"right",children:[Object(v.jsx)("p",{children:e.firstName}),Object(v.jsx)("p",{children:e.lastName})]})]},e._id)}))}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{onClick:function(){return console.log(n),console.log(d),void m({variables:{roundId:n,qualifiers:d}})},children:"Finalise Competitors"})})]})}),de=(t(103),function(){var e=Object(O.e)().roundId,n=Object(X.a)(ce,{variables:{roundId:e}}).data,t=Object(c.useState)([]),a=Object(q.a)(t,2),r=a[0],s=a[1];return Object(c.useEffect)((function(){s(null===n||void 0===n?void 0:n.roundQualifiers.qualifiers)}),[null===n||void 0===n?void 0:n.roundQualifiers.qualifiers]),console.log(r),Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{children:"CLOSE QUALIFYING"}),Object(v.jsx)("p",{children:"Allows qualifying to be finalised. Any drivers who haven't completed qualifying will receive null scores and be removed from round."}),r&&r.map((function(e){return Object(v.jsxs)("div",{className:"card",children:[Object(v.jsx)("div",{className:"left",children:Object(v.jsx)("p",{className:"carNo",children:e.competitor.carNo})}),Object(v.jsxs)("div",{className:"right",children:[Object(v.jsx)("p",{children:e.competitor.firstName}),Object(v.jsx)("p",{children:e.competitor.lastName})]}),Object(v.jsxs)("div",{className:"qScores",children:[Object(v.jsxs)("form",{children:[Object(v.jsx)("label",{children:"Lap 1"}),Object(v.jsx)("input",{}),Object(v.jsx)("button",{type:"submit",children:"Confirm"})]}),Object(v.jsxs)("form",{children:[Object(v.jsx)("label",{children:"Lap 2"}),Object(v.jsx)("input",{}),Object(v.jsx)("button",{type:"submit",children:"Confirm"})," "]})]})]},e._id)})),Object(v.jsxs)("div",{children:[Object(v.jsx)("p",{children:"This section holds all drivers who haven't completed 2 qualifying laps for judges input, ordered by Marble # (Marble still not configured in models) 2 Onclick buttons? onClick takes parameters"}),Object(v.jsxs)("div",{className:"card",children:[Object(v.jsx)("div",{className:"left",children:Object(v.jsx)("p",{className:"carNo",children:"carNo"})}),Object(v.jsxs)("div",{className:"right",children:[Object(v.jsx)("p",{children:"firstName"}),Object(v.jsx)("p",{children:"lastName"})]}),Object(v.jsxs)("div",{className:"qScores",children:[Object(v.jsxs)("form",{children:[Object(v.jsx)("label",{children:"Lap 1"}),Object(v.jsx)("input",{}),Object(v.jsx)("button",{type:"submit",children:"Confirm"})]}),Object(v.jsxs)("form",{children:[Object(v.jsx)("label",{children:"Lap 2"}),Object(v.jsx)("input",{}),Object(v.jsx)("button",{type:"submit",children:"Confirm"})," "]})]})]})]}),Object(v.jsx)("hr",{}),Object(v.jsxs)("section",{children:[Object(v.jsx)("p",{children:"This section holds list of drivers who have completed qualifying, and orders them according to highest score."}),Object(v.jsx)("div",{children:Object(v.jsx)("p",{children:" Car No - Driver Name - Best - Second - Rank"})})]})]})}),je=function(){var e=Object(c.useState)(""),n=Object(q.a)(e,2),t=n[0],a=n[1],r=Object(O.e)().roundId,s=Object(X.a)(ce,{variables:{roundId:r}}).data,i=(null===s||void 0===s?void 0:s.roundQualifiers.qualifiers)||[],o=Object(X.a)(te,{variables:{roundId:r}}).data,l=(null===o||void 0===o?void 0:o.round)||{},d=function(e){return a(e)};return Object(v.jsxs)("div",{children:[Object(v.jsx)(M,{heading:"Round"}),Object(v.jsx)("div",{className:"sectionNav",children:Object(v.jsxs)("ul",{children:[Object(v.jsx)("li",{className:"section-link active",onClick:function(){return d("Competitors")},children:"Add Competitors"}),Object(v.jsx)("li",{className:"section-link active",onClick:function(){return d("Qualifying")},children:"Qualifying"})]})}),Object(v.jsx)("div",{className:"roundSections",children:"Competitors"===t?Object(v.jsx)(le,{competing:l,roundId:r}):"Qualifying"===t?(console.log(s),Object(v.jsx)(de,{qualifiers:i})):void 0}),Object(v.jsx)("section",{children:Object(v.jsx)(ie,{heading:"Edit Round details"})})]})};function ue(){var e=Object(c.useState)(""),n=Object(q.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)(""),s=Object(q.a)(r,2),i=s[0],o=s[1],l=Object(c.useState)(""),d=Object(q.a)(l,2),j=d[0],u=d[1],b=Object(R.a)(Y),O=Object(q.a)(b,1)[0],m=function(){var e=Object(_.a)(C.a.mark((function e(n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault();try{O({variables:{firstName:t,lastName:i,carNo:j}}),a(""),o(""),u("")}catch(c){console.error(c)}case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{children:Object(v.jsxs)("div",{children:[Object(v.jsx)(ie,{heading:"Register a Competitor"}),Object(v.jsxs)("form",{onSubmit:m,children:[Object(v.jsx)("input",{name:"firstName",placeholder:"First Name",value:t,onChange:function(e){return a(e.target.value)}}),Object(v.jsx)("input",{name:"lastName",placeholder:"Last Name",value:i,onChange:function(e){return o(e.target.value)}}),Object(v.jsx)("input",{name:"carNo",placeholder:"Car Number",value:j,onChange:function(e){return u(parseInt(e.target.value))}}),Object(v.jsx)("button",{type:"submit",children:"SUBMIT"})]})]})})}t(104);var be=function(e){var n=e.competitors;return n.length?Object(v.jsx)("div",{onClick:function(){return console.log("Click")},children:n&&n.map((function(e){return Object(v.jsxs)("div",{className:"card",children:[Object(v.jsx)("div",{className:"left",children:Object(v.jsx)("p",{className:"carNo",children:e.carNo})}),Object(v.jsxs)("div",{className:"right",children:[Object(v.jsx)("p",{children:e.firstName}),Object(v.jsx)("p",{children:e.lastName})]})]},e._id)}))}):Object(v.jsx)("h3",{children:"No Registered Competitors Yet"})};function Oe(){var e=Object(X.a)(ee),n=e.loading,t=e.data,c=(null===t||void 0===t?void 0:t.competitors)||[];return console.log(t),Object(v.jsxs)("main",{className:"sections",children:[Object(v.jsx)(M,{heading:"COMPETITORS"}),Object(v.jsx)("div",{className:"compContainer",children:n?Object(v.jsx)("div",{children:"Loading..."}):Object(v.jsx)(be,{competitors:c})}),Object(v.jsx)("hr",{}),Object(v.jsx)(ue,{})]})}var me=Object(o.a)({uri:"/graphql"}),he=Object(u.a)((function(e,n){var t=n.headers,c=localStorage.getItem("id_token");return{headers:Object(i.a)(Object(i.a)({},t),{},{authorization:c?"Bearer ".concat(c):""})}})),xe=new l.a({link:he.concat(me),cache:new d.a});var pe=function(){return Object(v.jsx)(j.a,{client:xe,children:Object(v.jsx)(b.a,{children:Object(v.jsxs)("div",{className:"app",children:[Object(v.jsx)(f,{}),Object(v.jsxs)("div",{className:"pages",children:[Object(v.jsx)(O.a,{exact:!0,path:"/",children:Object(v.jsx)(F,{})}),Object(v.jsx)(O.a,{exact:!0,path:"/round",children:Object(v.jsx)(se,{})}),Object(v.jsx)(O.a,{exact:!0,path:"/round/:roundId",children:Object(v.jsx)(je,{})}),Object(v.jsx)(O.a,{exact:!0,path:"/competitors",children:Object(v.jsx)(Oe,{})}),Object(v.jsx)(O.a,{exact:!0,path:"/login",children:Object(v.jsx)(P,{})}),Object(v.jsx)(O.a,{exact:!0,path:"/signup",children:Object(v.jsx)(B,{})})]})]})})})};s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(pe,{})}),document.getElementById("root"))},56:function(e,n,t){},66:function(e,n,t){},86:function(e,n,t){},87:function(e,n,t){},88:function(e,n,t){},98:function(e,n,t){}},[[105,1,2]]]);
//# sourceMappingURL=main.9cf93816.chunk.js.map